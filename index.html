<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AgriSense.AI â€” Interactive Flowchart</title>
  <style>
    :root{
      --bg: #f6f8fb;
      --card: #ffffff;
      --accent1: linear-gradient(135deg,#1fa2ff 0%, #12d8fa 100%);
      --accent2: linear-gradient(135deg,#7afcff 0%, #b692ff 100%);
      --accent3: linear-gradient(135deg,#7be495 0%, #2bb673 100%);zz
      --muted: #6b7280;
      --glass: rgba(255,255,255,0.7);
      --shadow: 0 10px 30px rgba(16,24,40,0.08);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }.addEventListener('click', ()=>{
      const title = detailsTitle.textContent;
      let key = null;
      for(const k in NODES){ if(NODES[k].title === title) key=k; }
      if(!key) key = 'analysis';
      updateAiRecommendation(key, skillSelect.value);
      // highlight briefly
      const el = document.querySelector(`[data-key="${key}"]`);
      if(el){
        el.style.boxShadow = '0 28px 60px rgba(20,100,200,0.16)';
        setTimeout(()=> el.style.boxShadow='0 6px 18px rgba(12,18,36,0.08)', 2000);
      }
    });

    // downloadCSV: create dummy csv and download (demo)
    downloadCSV.addEventListener('click', ()=>{
      const csv = 'farm_id,date,soil_moisture,ndvi,predicted_yield\\n1,2025-10-01,32,0.72,1200\\n2,2025-10-01,28,0.68,980\\n';
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'agrisense_sample.csv'; a.click();
      URL.revokeObjectURL(url);
    });

    // initialize with analysis node selected
    showDetails('analysis');
    // subtle initial highlight
    document.getElementById('node-analysis').style.boxShadow = '0 18px 40px rgba(12,18,36,0.12)';
  </script>
</body>
</html>
